# Interactive Shell Library - Visual Guide

A production-grade interactive shell library for PHP applications with MySQL-like CLI interfaces.

---

## Table of Contents

1. [Architecture Overview](#architecture-overview)
2. [Quick Start](#quick-start)
3. [Command Execution Flow](#command-execution-flow)
4. [Transport Options](#transport-options)
5. [Creating Custom Handlers](#creating-custom-handlers)
6. [API Reference](#api-reference)
7. [Handler Patterns](#handler-patterns)
8. [Hyperf Integration](#hyperf-integration)
9. [Streaming Mode](#streaming-mode)
10. [Message System](#message-system)
11. [State Management](#state-management)
12. [Non-Hyperf Integration](#non-hyperf-integration)
13. [Output Formats](#output-formats)
14. [Testing Guide](#testing-guide)

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERACTIVE SHELL ARCHITECTURE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  CLIENT SIDE                           â”‚       SERVER SIDE                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•                            â”‚       â•â•â•â•â•â•â•â•â•â•â•                   â”‚
â”‚                                        â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Shell             â”‚         â”‚    â”‚       SocketServer         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚    â”‚    (Swoole Coroutines)     â”‚  â”‚
â”‚  â”‚  â”‚ Standardâ”‚ â”‚Streamingâ”‚  â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â”‚  Shell  â”‚ â”‚  Shell  â”‚  â”‚         â”‚                 â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚         â”‚                 â–¼                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚          â”‚           â”‚                 â”‚    â”‚     CommandRegistry        â”‚  â”‚
â”‚          â–¼           â–¼                 â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚  â”‚   Built-in Handlers  â”‚  â”‚  â”‚
â”‚  â”‚       ShellParser         â”‚         â”‚    â”‚  â”‚  â€¢ PingHandler       â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Arguments extraction   â”‚         â”‚    â”‚  â”‚  â€¢ ConfigHandler     â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Options parsing        â”‚         â”‚    â”‚  â”‚  â€¢ RoutesHandler     â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Alias expansion        â”‚         â”‚    â”‚  â”‚  â€¢ ContainerHandler  â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Quote handling         â”‚         â”‚    â”‚  â”‚  â€¢ HelpHandler       â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚              â”‚                         â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚              â–¼                         â”‚    â”‚  â”‚   Custom Handlers    â”‚  â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚  â”‚  â€¢ YourHandler1      â”‚  â”‚  â”‚
â”‚  â”‚    Transport Layer        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    â”‚  â”‚  â€¢ YourHandler2      â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚    â”‚  â”‚  â€¢ ...               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   HTTP   â”‚ â”‚  Unix   â”‚ â”‚         â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”‚Transport â”‚ â”‚ Socket  â”‚ â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                 â–¼                  â”‚
â”‚              â”‚                         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â–¼                         â”‚    â”‚     ContextInterface       â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚  â€¢ Container access        â”‚  â”‚
â”‚  â”‚     OutputFormatter       â”‚         â”‚    â”‚  â€¢ Configuration           â”‚  â”‚
â”‚  â”‚  â€¢ Table  â€¢ JSON          â”‚         â”‚    â”‚  â€¢ Framework abstraction   â”‚  â”‚
â”‚  â”‚  â€¢ CSV    â€¢ Vertical      â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                     â”‚
â”‚                                        â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Components

| Component | Purpose |
|-----------|---------|
| **Shell** | Standard REPL with readline support |
| **StreamingShell** | Bidirectional real-time messaging |
| **ShellParser** | Parses commands, arguments, and options |
| **Transport** | Pluggable HTTP or Unix socket communication |
| **CommandRegistry** | Routes commands to appropriate handlers |
| **OutputFormatter** | Formats results in multiple styles |

---

## Quick Start

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸš€ QUICK START GUIDE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”‚   STEP 1                          STEP 2                                     â”‚
â”‚   Install Package                 Choose Transport                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚                     â”‚         â”‚                                 â”‚       â”‚
â”‚   â”‚  composer require   â”‚  â”€â”€â”€â”€â–¶  â”‚  HTTP: Cross-machine access     â”‚       â”‚
â”‚   â”‚  nashgao/           â”‚         â”‚  Socket: High-performance local â”‚       â”‚
â”‚   â”‚  interactive-shell  â”‚         â”‚                                 â”‚       â”‚
â”‚   â”‚                     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                           â”‚
â”‚                                                 â”‚                           â”‚
â”‚                                                 â–¼                           â”‚
â”‚   STEP 4                          STEP 3                                     â”‚
â”‚   Run Interactive Shell           Create Shell Instance                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚                     â”‚         â”‚                                 â”‚       â”‚
â”‚   â”‚  $shell->run();     â”‚  â—€â”€â”€â”€â”€  â”‚  $shell = new Shell(            â”‚       â”‚
â”‚   â”‚                     â”‚         â”‚      $transport,                â”‚       â”‚
â”‚   â”‚  myapp>             â”‚         â”‚      'myapp> '                  â”‚       â”‚
â”‚   â”‚                     â”‚         â”‚  );                             â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Minimal Client Example

```php
<?php

use InteractiveShell\Shell;
use InteractiveShell\Transport\HttpTransport;

// Create transport
$transport = new HttpTransport('http://localhost:9501');

// Create and run shell
$shell = new Shell($transport, 'myapp> ');
$shell->run();
```

### Minimal Server Example (Hyperf)

```php
<?php
// config/autoload/interactive_shell.php
return [
    'enabled' => true,
    'socket_path' => '/var/run/hyperf-shell.sock',
    'handlers' => [
        // Your custom handlers here
    ],
];
```

---

## Command Execution Flow

### Standard Request/Response Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMMAND EXECUTION FLOW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   USER INPUT              PARSING                    TRANSPORT                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚             â”‚        â”‚                â”‚        â”‚                  â”‚      â”‚
â”‚   â”‚ "users -v   â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ ParsedCommand  â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  HTTP POST or    â”‚      â”‚
â”‚   â”‚  --format=  â”‚        â”‚                â”‚        â”‚  Unix Socket     â”‚      â”‚
â”‚   â”‚  json"      â”‚        â”‚ cmd: "users"   â”‚        â”‚                  â”‚      â”‚
â”‚   â”‚             â”‚        â”‚ args: []       â”‚        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ opts: {        â”‚        â”‚                  â”‚      â”‚
â”‚                          â”‚   v: true,     â”‚        â”‚  Server Side     â”‚      â”‚
â”‚                          â”‚   format: json â”‚        â”‚                  â”‚      â”‚
â”‚                          â”‚ }              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                â”‚
â”‚                                                             â”‚                â”‚
â”‚                                                             â–¼                â”‚
â”‚   DISPLAY                 FORMATTING                  RESULT                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚             â”‚        â”‚                â”‚        â”‚                  â”‚      â”‚
â”‚   â”‚  Console    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”‚ OutputFormatterâ”‚â—€â”€â”€â”€â”€â”€â”€â”€â”‚  CommandResult   â”‚      â”‚
â”‚   â”‚  Output     â”‚        â”‚                â”‚        â”‚                  â”‚      â”‚
â”‚   â”‚             â”‚        â”‚  Table / JSON  â”‚        â”‚  success: true   â”‚      â”‚
â”‚   â”‚  [          â”‚        â”‚  CSV / Verticalâ”‚        â”‚  data: [...]     â”‚      â”‚
â”‚   â”‚   {...},    â”‚        â”‚                â”‚        â”‚  metadata: {...} â”‚      â”‚
â”‚   â”‚   {...}     â”‚        â”‚                â”‚        â”‚                  â”‚      â”‚
â”‚   â”‚  ]          â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                            â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Server-Side Processing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVER-SIDE PROCESSING                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        SocketServer                                  â”‚    â”‚
â”‚   â”‚                   (Swoole Coroutine-based)                          â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                    Client Connection Accepted                        â”‚    â”‚
â”‚   â”‚                  (Each client in own coroutine)                      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â–¼                               â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚    JSON Protocol       â”‚        â”‚    Raw Command         â”‚              â”‚
â”‚   â”‚    {                   â”‚        â”‚    "users --format=    â”‚              â”‚
â”‚   â”‚      "command":"users",â”‚        â”‚     json"              â”‚              â”‚
â”‚   â”‚      "args":[...],     â”‚        â”‚                        â”‚              â”‚
â”‚   â”‚      "options":{...}   â”‚        â”‚                        â”‚              â”‚
â”‚   â”‚    }                   â”‚        â”‚                        â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚               â”‚                                 â”‚                           â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â–¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                       ShellParser.parse()                            â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                   CommandRegistry.execute()                          â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚   â”‚    â”‚ "ping"       â”‚     â”‚ "config"     â”‚     â”‚ "mycommand"  â”‚       â”‚    â”‚
â”‚   â”‚    â”‚      â†“       â”‚     â”‚      â†“       â”‚     â”‚      â†“       â”‚       â”‚    â”‚
â”‚   â”‚    â”‚ PingHandler  â”‚     â”‚ConfigHandler â”‚     â”‚ YourHandler  â”‚       â”‚    â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                     CommandResult (JSON)                             â”‚    â”‚
â”‚   â”‚                     Sent back to client                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Transport Options

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ”Œ TRANSPORT COMPARISON                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   HTTP TRANSPORT                         UNIX SOCKET TRANSPORT               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•                         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                        â”‚             â”‚                        â”‚          â”‚
â”‚   â”‚  âœ“ Cross-machine       â”‚             â”‚  âœ“ Fastest local       â”‚          â”‚
â”‚   â”‚  âœ“ Load balancing      â”‚             â”‚  âœ“ No network stack    â”‚          â”‚
â”‚   â”‚  âœ“ Auth headers        â”‚             â”‚  âœ“ File permissions    â”‚          â”‚
â”‚   â”‚  âœ“ SSL/TLS support     â”‚             â”‚  âœ“ Bidirectional       â”‚          â”‚
â”‚   â”‚  âœ“ REST-friendly       â”‚             â”‚  âœ“ Streaming mode      â”‚          â”‚
â”‚   â”‚                        â”‚             â”‚                        â”‚          â”‚
â”‚   â”‚  âœ— Higher latency      â”‚             â”‚  âœ— Same machine only   â”‚          â”‚
â”‚   â”‚  âœ— No real streaming   â”‚             â”‚  âœ— No cross-network    â”‚          â”‚
â”‚   â”‚                        â”‚             â”‚                        â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                               â”‚
â”‚   WHEN TO USE:                           WHEN TO USE:                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚   â€¢ Remote servers                       â€¢ Local Hyperf server               â”‚
â”‚   â€¢ Microservices                        â€¢ Docker containers                 â”‚
â”‚   â€¢ Cloud deployments                    â€¢ High-performance needs            â”‚
â”‚   â€¢ Multi-machine setups                 â€¢ Real-time streaming               â”‚
â”‚   â€¢ Behind load balancers                â€¢ Low-latency requirements          â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   CODE EXAMPLES:                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                               â”‚
â”‚   // HTTP Transport                                                          â”‚
â”‚   $transport = new HttpTransport(                                            â”‚
â”‚       'http://api.example.com:9501',                                         â”‚
â”‚       ['Authorization' => 'Bearer token']                                    â”‚
â”‚   );                                                                         â”‚
â”‚                                                                               â”‚
â”‚   // Unix Socket Transport                                                   â”‚
â”‚   $transport = new UnixSocketTransport(                                      â”‚
â”‚       '/var/run/hyperf-shell.sock'                                           â”‚
â”‚   );                                                                         â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Creating Custom Handlers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ”§ CREATE CUSTOM COMMAND HANDLER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   STEP 1: Implement CommandHandlerInterface                                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  <?php                                                                â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚  use InteractiveShell\Server\Handler\CommandHandlerInterface;        â”‚   â”‚
â”‚   â”‚  use InteractiveShell\Command\CommandResult;                         â”‚   â”‚
â”‚   â”‚  use InteractiveShell\Command\ParsedCommand;                         â”‚   â”‚
â”‚   â”‚  use InteractiveShell\Server\Context\ContextInterface;               â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚  class UsersHandler implements CommandHandlerInterface               â”‚   â”‚
â”‚   â”‚  {                                                                    â”‚   â”‚
â”‚   â”‚      public function getCommand(): string                            â”‚   â”‚
â”‚   â”‚      {                                                                â”‚   â”‚
â”‚   â”‚          return 'users';  // Command name                            â”‚   â”‚
â”‚   â”‚      }                                                                â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      public function handle(                                         â”‚   â”‚
â”‚   â”‚          ParsedCommand $command,                                     â”‚   â”‚
â”‚   â”‚          ContextInterface $context                                   â”‚   â”‚
â”‚   â”‚      ): CommandResult {                                              â”‚   â”‚
â”‚   â”‚          $verbose = $command->hasOption('v');                        â”‚   â”‚
â”‚   â”‚          $users = $this->fetchUsers($verbose);                       â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚          return CommandResult::success($users);                      â”‚   â”‚
â”‚   â”‚      }                                                                â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      public function getDescription(): string                        â”‚   â”‚
â”‚   â”‚      {                                                                â”‚   â”‚
â”‚   â”‚          return 'List all users in the system';                      â”‚   â”‚
â”‚   â”‚      }                                                                â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      public function getUsage(): array                               â”‚   â”‚
â”‚   â”‚      {                                                                â”‚   â”‚
â”‚   â”‚          return [                                                     â”‚   â”‚
â”‚   â”‚              'users'           => 'List all users',                  â”‚   â”‚
â”‚   â”‚              'users -v'        => 'Verbose output',                  â”‚   â”‚
â”‚   â”‚              'users --role=X'  => 'Filter by role',                  â”‚   â”‚
â”‚   â”‚          ];                                                           â”‚   â”‚
â”‚   â”‚      }                                                                â”‚   â”‚
â”‚   â”‚  }                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                   â”‚
â”‚                                          â–¼                                   â”‚
â”‚   STEP 2: Register with CommandRegistry                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  $registry = new CommandRegistry($context);                          â”‚   â”‚
â”‚   â”‚  $registry->register(new UsersHandler());                            â”‚   â”‚
â”‚   â”‚  $registry->register(new OrdersHandler());                           â”‚   â”‚
â”‚   â”‚  $registry->register(new StatsHandler());                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                   â”‚
â”‚                                          â–¼                                   â”‚
â”‚   STEP 3: Use in Shell                                                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                        â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  myapp> users                                                         â”‚   â”‚
â”‚   â”‚  +----+----------+------------------+                                 â”‚   â”‚
â”‚   â”‚  | id | name     | email            |                                 â”‚   â”‚
â”‚   â”‚  +----+----------+------------------+                                 â”‚   â”‚
â”‚   â”‚  | 1  | Alice    | alice@email.com  |                                 â”‚   â”‚
â”‚   â”‚  | 2  | Bob      | bob@email.com    |                                 â”‚   â”‚
â”‚   â”‚  +----+----------+------------------+                                 â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚  myapp> users --format=json                                           â”‚   â”‚
â”‚   â”‚  [{"id":1,"name":"Alice",...},{"id":2,"name":"Bob",...}]             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Handler Interface Methods

| Method | Return Type | Purpose |
|--------|-------------|---------|
| `getCommand()` | `string` | Command name to register |
| `handle($cmd, $ctx)` | `CommandResult` | Execute command logic |
| `getDescription()` | `string` | Help text for command |
| `getUsage()` | `array` | Usage examples |

---

## API Reference

This section documents the core interfaces and classes for building custom integrations.

### ParsedCommand

Immutable value object representing a parsed shell command.

**Properties:**

| Property | Type | Description |
|----------|------|-------------|
| `$command` | `string` | The command name |
| `$arguments` | `array<int, string>` | Positional arguments indexed from 0 |
| `$options` | `array<string, mixed>` | Named options as key-value pairs |
| `$raw` | `string` | Original raw input string |
| `$hasVerticalTerminator` | `bool` | Whether input ended with `\G` |

**Methods:**

| Method | Signature | Description |
|--------|-----------|-------------|
| `getArgument()` | `getArgument(int $index, mixed $default = null): mixed` | Get positional argument by index |
| `getOption()` | `getOption(string $key, mixed $default = null): mixed` | Get named option value |
| `hasOption()` | `hasOption(string $key): bool` | Check if option exists |
| `empty()` | `static empty(): self` | Create empty parsed command |

### CommandResult

Immutable value object representing command execution result.

**Properties:**

| Property | Type | Description |
|----------|------|-------------|
| `$success` | `bool` | Whether the command succeeded |
| `$data` | `mixed` | Command-specific result payload |
| `$error` | `?string` | Error message if `success=false` |
| `$message` | `?string` | Human-readable summary message |
| `$metadata` | `array<string, mixed>` | Operational metadata (duration, counts, etc.) |

**Factory Methods:**

| Method | Signature | Purpose |
|--------|-----------|---------|
| `success()` | `success(mixed $data = null, ?string $message = null, array $metadata = []): self` | Create success result |
| `failure()` | `failure(string $error, mixed $data = null, array $metadata = []): self` | Create failure result |
| `fromException()` | `fromException(Throwable $e, array $metadata = []): self` | Create from throwable |
| `fromResponse()` | `fromResponse(array $response): self` | Create from array response |

**Instance Methods:**

| Method | Description |
|--------|-------------|
| `getExitCode(): int` | Get CLI exit code (0 for success, 1 for failure) |
| `withMetadata(array $metadata): self` | Create new result with merged metadata |
| `withMessage(string $message): self` | Create new result with message |
| `toArray(): array` | Convert to array representation |

### ContextInterface

Framework context abstraction for server-side command handlers.

| Method | Signature | Description |
|--------|-----------|-------------|
| `getContainer()` | `getContainer(): ContainerInterface` | Get PSR-11 container instance |
| `getConfig()` | `getConfig(): array` | Get all configuration as array |
| `get()` | `get(string $key, mixed $default = null): mixed` | Get config by dot-notation key |
| `has()` | `has(string $key): bool` | Check if config key exists |

### TransportInterface

Client-side transport for sending commands to the server.

| Method | Signature | Description |
|--------|-----------|-------------|
| `connect()` | `connect(): void` | Establish connection |
| `disconnect()` | `disconnect(): void` | Close connection |
| `isConnected()` | `isConnected(): bool` | Check connection status |
| `send()` | `send(ParsedCommand $command): CommandResult` | Send command, receive result |
| `ping()` | `ping(): bool` | Health check |
| `getEndpoint()` | `getEndpoint(): string` | Get endpoint URL/path |
| `getInfo()` | `getInfo(): array` | Get endpoint information |

### StreamingTransportInterface

Extended transport for bidirectional streaming (extends `TransportInterface`).

| Method | Signature | Description |
|--------|-----------|-------------|
| `supportsStreaming()` | `supportsStreaming(): bool` | Check streaming support |
| `sendAsync()` | `sendAsync(ParsedCommand $command): void` | Send without waiting |
| `receive()` | `receive(float $timeout = -1): ?Message` | Receive message from stream |
| `onMessage()` | `onMessage(callable $callback): void` | Register message callback |
| `startStreaming()` | `startStreaming(): void` | Start streaming loop |
| `stopStreaming()` | `stopStreaming(): void` | Stop streaming loop |
| `isStreaming()` | `isStreaming(): bool` | Check if in streaming mode |

---

## Handler Patterns

This section provides concrete patterns for implementing robust command handlers.

### Error Handling Pattern

Always validate inputs and return meaningful error messages:

```php
<?php

use NashGao\InteractiveShell\Command\CommandResult;
use NashGao\InteractiveShell\Parser\ParsedCommand;
use NashGao\InteractiveShell\Server\ContextInterface;
use NashGao\InteractiveShell\Server\Handler\CommandHandlerInterface;

final class ConfigGetHandler implements CommandHandlerInterface
{
    public function getCommand(): string
    {
        return 'config:get';
    }

    public function handle(ParsedCommand $command, ContextInterface $context): CommandResult
    {
        $key = $command->getArgument(0);

        // Validate required argument
        if ($key === null || $key === '') {
            return CommandResult::failure('Missing required argument: key');
        }

        // Check if key exists
        if (!$context->has($key)) {
            return CommandResult::failure(
                sprintf("Config key '%s' not found", $key),
                ['available_keys' => array_keys($context->getConfig())]
            );
        }

        return CommandResult::success($context->get($key));
    }

    public function getDescription(): string
    {
        return 'Get a configuration value by key';
    }

    public function getUsage(): array
    {
        return [
            'config:get database.host' => 'Get database host',
            'config:get app.name'      => 'Get application name',
        ];
    }
}
```

### Options Processing Pattern

Process command options with defaults and type coercion:

```php
public function handle(ParsedCommand $command, ContextInterface $context): CommandResult
{
    // Option with default value
    $format = $command->getOption('format', 'table');

    // Boolean flag options (short and long form)
    $verbose = $command->hasOption('v') || $command->hasOption('verbose');

    // Numeric option with type coercion
    $limit = (int) $command->getOption('limit', 100);

    // Multiple positional arguments
    $action = $command->getArgument(0);  // First argument
    $target = $command->getArgument(1);  // Second argument

    // Check for vertical terminator (\G)
    if ($command->hasVerticalTerminator) {
        $format = 'vertical';
    }

    // ... use the processed options
}
```

### Dependency Injection Pattern

Inject services via constructor for testable handlers:

```php
<?php

use NashGao\InteractiveShell\Command\CommandResult;
use NashGao\InteractiveShell\Parser\ParsedCommand;
use NashGao\InteractiveShell\Server\ContextInterface;
use NashGao\InteractiveShell\Server\Handler\CommandHandlerInterface;
use NashGao\InteractiveShell\Server\Handler\CommandRegistry;

final class UsersHandler implements CommandHandlerInterface
{
    public function __construct(
        private readonly UserRepository $users,
        private readonly CommandRegistry $registry  // For help cross-references
    ) {}

    public function getCommand(): string
    {
        return 'users';
    }

    public function handle(ParsedCommand $command, ContextInterface $context): CommandResult
    {
        $action = $command->getArgument(0, 'list');

        return match ($action) {
            'list' => $this->listUsers($command),
            'show' => $this->showUser($command),
            'count' => CommandResult::success(['count' => $this->users->count()]),
            default => CommandResult::failure(
                sprintf("Unknown action '%s'. Use: list, show, count", $action)
            ),
        };
    }

    private function listUsers(ParsedCommand $command): CommandResult
    {
        $limit = (int) $command->getOption('limit', 50);
        $users = $this->users->findAll($limit);

        return CommandResult::success($users, sprintf('Found %d users', count($users)));
    }

    private function showUser(ParsedCommand $command): CommandResult
    {
        $userId = $command->getArgument(1);

        if ($userId === null) {
            return CommandResult::failure('Usage: users show <user_id>');
        }

        $user = $this->users->find((int) $userId);

        if ($user === null) {
            return CommandResult::failure(sprintf("User %s not found", $userId));
        }

        return CommandResult::success($user);
    }

    public function getDescription(): string
    {
        return 'Manage system users';
    }

    public function getUsage(): array
    {
        return [
            'users'              => 'List all users',
            'users list --limit=10' => 'List with limit',
            'users show <id>'    => 'Show user details',
            'users count'        => 'Count total users',
        ];
    }
}
```

### Metadata and Timing Pattern

Include execution metadata for observability:

```php
public function handle(ParsedCommand $command, ContextInterface $context): CommandResult
{
    $startTime = microtime(true);

    try {
        $data = $this->performExpensiveOperation();
        $duration = microtime(true) - $startTime;

        return CommandResult::success($data, null, [
            'duration_ms' => round($duration * 1000, 2),
            'record_count' => count($data),
            'cached' => false,
        ]);
    } catch (\Throwable $e) {
        return CommandResult::fromException($e, [
            'duration_ms' => round((microtime(true) - $startTime) * 1000, 2),
        ]);
    }
}
```

---

## Hyperf Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ”· HYPERF INTEGRATION                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   HYPERF SERVER                              SHELL CLIENT                    â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                            â”‚            â”‚                      â”‚        â”‚
â”‚   â”‚      Hyperf Application    â”‚            â”‚   php client.php     â”‚        â”‚
â”‚   â”‚                            â”‚            â”‚   --socket=/var/     â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚   run/hyperf.sock    â”‚        â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚            â”‚                      â”‚        â”‚
â”‚   â”‚  â”‚    ShellProcess      â”‚  â”‚â—€â•â•â•â•â•â•â•â•â•â•â–¶â”‚   or with HTTP:      â”‚        â”‚
â”‚   â”‚  â”‚  (Background Process) â”‚  â”‚    Unix   â”‚                      â”‚        â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚   Socket   â”‚   php client.php     â”‚        â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚   --http=localhost   â”‚        â”‚
â”‚   â”‚             â”‚              â”‚            â”‚   :9501              â”‚        â”‚
â”‚   â”‚             â–¼              â”‚            â”‚                      â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚    SocketServer      â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  /var/run/hyperf.sockâ”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚   â”‚             â”‚              â”‚                                             â”‚
â”‚   â”‚             â–¼              â”‚                                             â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚   â”‚  â”‚   CommandRegistry    â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Built-in handlers â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Custom handlers   â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Hyperf fallback   â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚   â”‚             â”‚              â”‚                                             â”‚
â”‚   â”‚             â–¼              â”‚                                             â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚   â”‚  â”‚    HyperfContext     â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Container access  â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Config access     â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚  â€¢ Service locator   â”‚  â”‚                                             â”‚
â”‚   â”‚  â”‚                      â”‚  â”‚                                             â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚   â”‚                            â”‚                                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   CONFIGURATION: config/autoload/interactive_shell.php                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                        â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  <?php                                                                â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚  return [                                                             â”‚   â”‚
â”‚   â”‚      // Enable/disable the shell process                             â”‚   â”‚
â”‚   â”‚      'enabled' => true,                                              â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      // Unix socket path for local connections                       â”‚   â”‚
â”‚   â”‚      'socket_path' => '/var/run/hyperf-shell.sock',                  â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      // Socket file permissions (0660 = owner+group read/write)      â”‚   â”‚
â”‚   â”‚      'socket_permissions' => 0660,                                   â”‚   â”‚
â”‚   â”‚                                                                       â”‚   â”‚
â”‚   â”‚      // Custom command handlers                                      â”‚   â”‚
â”‚   â”‚      'handlers' => [                                                 â”‚   â”‚
â”‚   â”‚          App\Shell\UsersHandler::class,                              â”‚   â”‚
â”‚   â”‚          App\Shell\OrdersHandler::class,                             â”‚   â”‚
â”‚   â”‚          App\Shell\MetricsHandler::class,                            â”‚   â”‚
â”‚   â”‚      ],                                                               â”‚   â”‚
â”‚   â”‚  ];                                                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Built-in Hyperf Handlers

| Handler | Command | Description |
|---------|---------|-------------|
| `PingHandler` | `ping` | Health check with memory info |
| `ConfigHandler` | `config` | Configuration introspection |
| `RoutesHandler` | `routes` | HTTP routes inspection |
| `ContainerHandler` | `container` | DI container info |
| `CommandListHandler` | `commands` | Available commands list |
| `HelpHandler` | `help` | Help for any command |

---

## Streaming Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ“¡ STREAMING MODE ARCHITECTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   SWOOLE COROUTINE MODE (Recommended)                                        â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚   â”‚   â”‚                 â”‚    â”‚                 â”‚    â”‚              â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  Coroutine 1    â”‚    â”‚  Coroutine 2    â”‚    â”‚ Coroutine 3  â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•    â”‚    â”‚  â•â•â•â•â•â•â•â•â•â•â•    â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•  â”‚  â”‚     â”‚
â”‚   â”‚   â”‚                 â”‚    â”‚                 â”‚    â”‚              â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  Message        â”‚    â”‚  Message        â”‚    â”‚   User       â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  Receiver       â”‚    â”‚  Display        â”‚    â”‚   Input      â”‚  â”‚     â”‚
â”‚   â”‚   â”‚                 â”‚    â”‚                 â”‚    â”‚              â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  transport.     â”‚    â”‚  filter â†’       â”‚    â”‚  readline()  â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  receive()      â”‚    â”‚  format â†’       â”‚    â”‚      â†“       â”‚  â”‚     â”‚
â”‚   â”‚   â”‚      â†“          â”‚    â”‚  output         â”‚    â”‚  process     â”‚  â”‚     â”‚
â”‚   â”‚   â”‚  channel.push   â”‚    â”‚                 â”‚    â”‚  command     â”‚  â”‚     â”‚
â”‚   â”‚   â”‚                 â”‚    â”‚                 â”‚    â”‚              â”‚  â”‚     â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
â”‚   â”‚            â”‚                      â”‚                    â”‚          â”‚     â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚     â”‚
â”‚   â”‚                                   â”‚                               â”‚     â”‚
â”‚   â”‚                                   â–¼                               â”‚     â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚     â”‚
â”‚   â”‚                    â”‚      Main Coordinator       â”‚                â”‚     â”‚
â”‚   â”‚                    â”‚   (Swoole Channel-based)    â”‚                â”‚     â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â”‚   POLLING MODE (Fallback when Swoole unavailable)                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                            â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚     â”‚
â”‚   â”‚         â”‚              Event Loop                        â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                                â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â”‚             â”‚        â”‚             â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â”‚  stream_    â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Check      â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â”‚  select()   â”‚        â”‚  messages   â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â”‚             â”‚        â”‚             â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                 â”‚             â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                 â–¼             â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚             â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚  Check      â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚  user input â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚             â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                 â”‚             â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                 â–¼             â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚  10ms sleep â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â”‚  (CPU save) â”‚      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚          â”‚     â”‚
â”‚   â”‚         â”‚                                               â”‚          â”‚     â”‚
â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   USAGE:                                                                     â”‚
â”‚   â•â•â•â•â•â•                                                                     â”‚
â”‚                                                                               â”‚
â”‚   $streamingShell = new StreamingShell(                                      â”‚
â”‚       new UnixSocketTransport('/var/run/stream.sock'),                       â”‚
â”‚       'stream> '                                                             â”‚
â”‚   );                                                                         â”‚
â”‚   $streamingShell->run();                                                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Message System

The message system provides typed message handling for streaming mode.

### Message Class

Represents an incoming message from a streaming transport.

**Properties:**

| Property | Type | Description |
|----------|------|-------------|
| `$type` | `string` | Message type (data, system, error, info) |
| `$payload` | `mixed` | Message content |
| `$source` | `string` | Message origin (e.g., "mqtt:publish") |
| `$timestamp` | `DateTimeImmutable` | When the message was created |
| `$metadata` | `array<string, mixed>` | Additional context |

**Factory Methods:**

```php
use NashGao\InteractiveShell\Message\Message;

// Data message (e.g., received MQTT message)
$message = Message::data(
    payload: ['temperature' => 25.5, 'humidity' => 60],
    source: 'mqtt:sensors/room1',
    metadata: ['topic' => 'sensors/room1', 'qos' => 1]
);

// System message (e.g., connection status)
$message = Message::system(
    message: 'Connected to broker',
    metadata: ['broker' => 'localhost:1883']
);

// Error message
$message = Message::error(
    error: 'Connection timeout',
    metadata: ['retry_count' => 3]
);

// Deserialize from array
$message = Message::fromArray([
    'type' => 'data',
    'payload' => ['value' => 42],
    'source' => 'sensor',
    'timestamp' => '2024-01-15T10:30:00+00:00',
    'metadata' => ['topic' => 'readings'],
]);
```

### FilterExpression (Client-Side Filtering)

Filter incoming messages by type, source, or topic using glob patterns.

```php
use NashGao\InteractiveShell\Message\FilterExpression;
use NashGao\InteractiveShell\Message\Message;

// Parse filter string
$filter = FilterExpression::parse('type:data source:mqtt/*');

// Check if message matches
$message = Message::data(['temp' => 25], 'mqtt/sensors');
if ($filter->matches($message)) {
    // Process matching message
}

// Build filter programmatically
$filter = new FilterExpression();
$filter->addFilter('type', 'data')
       ->addFilter('source', 'sensors/*');

// Check filter state
$filter->hasFilters();    // true
$filter->toString();      // "type:data source:sensors/*"

// Clear filters
$filter->clear();
```

**Supported filter fields:**

| Field | Description | Example |
|-------|-------------|---------|
| `type` | Message type | `type:data`, `type:error` |
| `source` | Message source | `source:mqtt/*`, `source:system` |
| `topic` | Topic from metadata | `topic:sensors/*` |
| `channel` | Channel from metadata | `channel:alerts` |

### MessageFormatter (Terminal Display)

Format messages for terminal output with optional color support.

```php
use NashGao\InteractiveShell\Message\MessageFormatter;
use NashGao\InteractiveShell\Message\Message;

$formatter = new MessageFormatter();

// Configure formatting options
$formatter->setColorEnabled(true)
          ->setShowTimestamp(true)
          ->setShowSource(true);

// Format a message
$message = Message::data(['temp' => 25.5], 'mqtt:sensors/temp');
echo $formatter->format($message);
// Output: [10:30:00.456] [DATA] <mqtt:sensors/temp> {"temp":25.5}

// Compact format for high-volume streams
echo $formatter->formatCompact($message);
// Output: [10:30:00] D {"temp":25.5}
```

**Color codes by message type:**

| Type | Color | Indicator |
|------|-------|-----------|
| `data` | Green | `[DATA]` |
| `system` | Blue | `[SYS]` |
| `error` | Red | `[ERR]` |
| `info` | Cyan | `[INFO]` |

---

## State Management

The shell maintains session state, command history, and aliases.

### ShellState

Manages shell session state and multi-line input buffering.

```php
use NashGao\InteractiveShell\State\ShellState;

// Create with default session file (~/.interactive_shell_session)
$state = new ShellState();

// Or specify custom session file
$state = new ShellState('/tmp/my-shell-session');
```

**Multi-line Input Handling:**

Lines ending with `\` are buffered until a complete command is entered:

```php
// Process user input
$result = $state->processInput('SELECT * FROM users \\');
// Returns: null (incomplete, waiting for more input)

$result = $state->processInput('WHERE active = 1');
// Returns: "SELECT * FROM users WHERE active = 1"

// Check multi-line state
$state->isInMultiLine();           // true while buffering
$state->getContinuationPrompt();   // "...> "
$state->resetMultiLine();          // Clear buffer
```

**Session Persistence:**

```php
// Get/set session values
$state->set('default_format', 'json');
$format = $state->get('default_format', 'table');

// Record command execution (for metrics)
$state->recordCommand();

// Get session metrics
$metrics = $state->getSessionMetrics();
// [
//     'session_start' => '2024-01-15T10:00:00+00:00',
//     'session_duration' => 'PT1H30M45S',
//     'commands_executed' => 42,
//     'last_command_time' => '2024-01-15T11:30:00+00:00',
//     'total_commands_ever' => 1250,
//     'total_session_duration' => 86400,
// ]

// Save session (persists total counts)
$state->saveSession();
```

### HistoryManager

Manages command history with persistence and readline integration.

```php
use NashGao\InteractiveShell\State\HistoryManager;

// Create with defaults (1000 entries, ~/.interactive_shell_history)
$history = new HistoryManager();

// Or customize
$history = new HistoryManager(
    maxEntries: 500,
    historyFile: '/tmp/my-history'
);
```

**Key Methods:**

| Method | Description |
|--------|-------------|
| `add(string $command)` | Add command (skips duplicates of last entry) |
| `previous(): ?string` | Navigate to previous command |
| `next(): ?string` | Navigate to next command |
| `getLast(): ?string` | Get most recent command |
| `getHistory(): array` | Get all history entries |
| `clear()` | Clear in-memory history |
| `load()` | Load from file |
| `save()` | Persist to file (with locking) |

```php
// Add commands
$history->add('users list');
$history->add('users show 1');

// Navigate history
$prev = $history->previous();  // "users show 1"
$prev = $history->previous();  // "users list"
$next = $history->next();      // "users show 1"

// Persist on shell exit
$history->save();
```

### AliasManager

Manages command aliases with built-in command protection.

```php
use NashGao\InteractiveShell\Command\AliasManager;

// Create with optional defaults
$aliases = new AliasManager([
    'll' => 'users list --format=table',
    'jq' => 'config --format=json',
]);
```

**Key Methods:**

| Method | Description |
|--------|-------------|
| `setAlias(string $alias, string $command)` | Create alias (throws if conflicts with built-in) |
| `expand(string $input): string` | Expand aliases in input |
| `removeAlias(string $alias): bool` | Delete alias |
| `hasAlias(string $alias): bool` | Check if alias exists |
| `getAliases(): array` | Get all aliases |
| `reset()` | Restore to defaults |

**Protected Commands:**

These cannot be aliased: `help`, `exit`, `quit`, `status`, `clear`, `connect`

```php
// Set alias
$aliases->setAlias('ll', 'users list --verbose');

// Expand input
$expanded = $aliases->expand('ll --limit=10');
// Returns: "users list --verbose --limit=10"

// Protected command throws exception
$aliases->setAlias('help', 'something');
// Throws: InvalidArgumentException
```

---

## Non-Hyperf Integration

This library can be used with any framework or standalone. Here's how to integrate without Hyperf.

### Implementing Custom Context

Create a context adapter for your framework:

```php
<?php

use NashGao\InteractiveShell\Server\ContextInterface;
use Psr\Container\ContainerInterface;

// Laravel Example
final class LaravelContext implements ContextInterface
{
    public function __construct(
        private readonly \Illuminate\Contracts\Container\Container $app
    ) {}

    public function getContainer(): ContainerInterface
    {
        // Laravel's container implements PSR-11
        return $this->app;
    }

    public function get(string $key, mixed $default = null): mixed
    {
        return config($key, $default);
    }

    public function has(string $key): bool
    {
        return config()->has($key);
    }

    public function getConfig(): array
    {
        return config()->all();
    }
}

// Symfony Example
final class SymfonyContext implements ContextInterface
{
    public function __construct(
        private readonly ContainerInterface $container,
        private readonly array $config
    ) {}

    public function getContainer(): ContainerInterface
    {
        return $this->container;
    }

    public function get(string $key, mixed $default = null): mixed
    {
        $keys = explode('.', $key);
        $value = $this->config;

        foreach ($keys as $k) {
            if (!is_array($value) || !array_key_exists($k, $value)) {
                return $default;
            }
            $value = $value[$k];
        }

        return $value;
    }

    public function has(string $key): bool
    {
        return $this->get($key, $this) !== $this;
    }

    public function getConfig(): array
    {
        return $this->config;
    }
}
```

### Array-Based Context (Standalone)

For simple standalone usage:

```php
<?php

use NashGao\InteractiveShell\Server\ContextInterface;
use Psr\Container\ContainerInterface;

final class ArrayContext implements ContextInterface
{
    public function __construct(
        private readonly ContainerInterface $container,
        private readonly array $config = []
    ) {}

    public function getContainer(): ContainerInterface
    {
        return $this->container;
    }

    public function get(string $key, mixed $default = null): mixed
    {
        $keys = explode('.', $key);
        $value = $this->config;

        foreach ($keys as $k) {
            if (!is_array($value) || !array_key_exists($k, $value)) {
                return $default;
            }
            $value = $value[$k];
        }

        return $value;
    }

    public function has(string $key): bool
    {
        return $this->get($key, $this) !== $this;
    }

    public function getConfig(): array
    {
        return $this->config;
    }
}
```

### Standalone Server Setup

Run a shell server without any framework:

```php
<?php

use NashGao\InteractiveShell\Server\SocketServer;
use NashGao\InteractiveShell\Server\Handler\CommandRegistry;
use NashGao\InteractiveShell\Server\Handler\BuiltIn\PingHandler;
use NashGao\InteractiveShell\Server\Handler\BuiltIn\HelpHandler;

// Simple PSR-11 container (or use any container library)
$container = new class implements \Psr\Container\ContainerInterface {
    private array $services = [];

    public function set(string $id, object $service): void
    {
        $this->services[$id] = $service;
    }

    public function get(string $id): mixed
    {
        return $this->services[$id] ?? throw new \Exception("Service not found: {$id}");
    }

    public function has(string $id): bool
    {
        return isset($this->services[$id]);
    }
};

// Create context with configuration
$context = new ArrayContext($container, [
    'app' => [
        'name' => 'My CLI Application',
        'version' => '1.0.0',
        'debug' => true,
    ],
    'database' => [
        'host' => 'localhost',
        'port' => 3306,
    ],
]);

// Set up command registry
$registry = new CommandRegistry($context);

// Register built-in handlers
$registry->register(new PingHandler());
$registry->register(new HelpHandler($registry));

// Register custom handlers
$registry->register(new MyCustomHandler());
$registry->register(new AnotherHandler($container->get(SomeService::class)));

// Create and start server
$server = new SocketServer(
    socketPath: '/var/run/my-shell.sock',
    registry: $registry,
    context: $context
);

echo "Starting shell server on /var/run/my-shell.sock\n";
$server->start();
```

### Client Connection

Connect to the standalone server:

```php
<?php

use NashGao\InteractiveShell\Shell;
use NashGao\InteractiveShell\Transport\UnixSocketTransport;

$transport = new UnixSocketTransport('/var/run/my-shell.sock');
$shell = new Shell($transport, 'myapp> ');
$shell->run();
```

### HTTP Server (Without Swoole)

For environments without Swoole, use HTTP transport:

```php
<?php
// http-server.php - Run with: php -S localhost:9501 http-server.php

use NashGao\InteractiveShell\Parser\ShellParser;
use NashGao\InteractiveShell\Server\Handler\CommandRegistry;

$context = new ArrayContext($container, $config);
$registry = new CommandRegistry($context);
$registry->register(new PingHandler());
// ... register handlers

// Handle incoming requests
$input = file_get_contents('php://input');
$data = json_decode($input, true);

if ($data === null) {
    http_response_code(400);
    echo json_encode(['error' => 'Invalid JSON']);
    exit;
}

$parser = new ShellParser();
$command = isset($data['raw'])
    ? $parser->parse($data['raw'])
    : new ParsedCommand($data['command'] ?? '', $data['arguments'] ?? [], $data['options'] ?? [], '', false);

$result = $registry->execute($command);

header('Content-Type: application/json');
echo json_encode($result->toArray());
```

---

## Output Formats

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ“Š OUTPUT FORMATS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   TABLE FORMAT (Default)                                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                     â”‚
â”‚                                                                               â”‚
â”‚   myapp> users                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚  +----+----------+------------------+--------+         â”‚                 â”‚
â”‚   â”‚  | id | name     | email            | active |         â”‚                 â”‚
â”‚   â”‚  +----+----------+------------------+--------+         â”‚                 â”‚
â”‚   â”‚  | 1  | Alice    | alice@email.com  | yes    |         â”‚                 â”‚
â”‚   â”‚  | 2  | Bob      | bob@email.com    | yes    |         â”‚                 â”‚
â”‚   â”‚  | 3  | Charlie  | charlie@mail.com | no     |         â”‚                 â”‚
â”‚   â”‚  +----+----------+------------------+--------+         â”‚                 â”‚
â”‚   â”‚  3 rows in set                                         â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                               â”‚
â”‚   JSON FORMAT                                                                â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•                                                                â”‚
â”‚                                                                               â”‚
â”‚   myapp> users --format=json                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚  [                                                     â”‚                 â”‚
â”‚   â”‚    {"id": 1, "name": "Alice", "email": "alice@..."},   â”‚                 â”‚
â”‚   â”‚    {"id": 2, "name": "Bob", "email": "bob@..."},       â”‚                 â”‚
â”‚   â”‚    {"id": 3, "name": "Charlie", "email": "charlie@..."}â”‚                 â”‚
â”‚   â”‚  ]                                                     â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                               â”‚
â”‚   VERTICAL FORMAT (MySQL \G style)                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â”‚
â”‚                                                                               â”‚
â”‚   myapp> users\G                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚  *************************** 1. row ***************    â”‚                 â”‚
â”‚   â”‚       id: 1                                            â”‚                 â”‚
â”‚   â”‚     name: Alice                                        â”‚                 â”‚
â”‚   â”‚    email: alice@email.com                              â”‚                 â”‚
â”‚   â”‚   active: yes                                          â”‚                 â”‚
â”‚   â”‚  *************************** 2. row ***************    â”‚                 â”‚
â”‚   â”‚       id: 2                                            â”‚                 â”‚
â”‚   â”‚     name: Bob                                          â”‚                 â”‚
â”‚   â”‚    ...                                                 â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                               â”‚
â”‚   CSV FORMAT                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•                                                                 â”‚
â”‚                                                                               â”‚
â”‚   myapp> users --format=csv                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚  id,name,email,active                                  â”‚                 â”‚
â”‚   â”‚  1,Alice,alice@email.com,yes                           â”‚                 â”‚
â”‚   â”‚  2,Bob,bob@email.com,yes                               â”‚                 â”‚
â”‚   â”‚  3,Charlie,charlie@mail.com,no                         â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Testing Guide

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           âœ… TESTING CHECKLIST                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   QUICK COMMANDS                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                             â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â”‚   [ ] composer test            Run all tests                       â”‚     â”‚
â”‚   â”‚   [ ] composer phpstan         Static analysis                     â”‚     â”‚
â”‚   â”‚   [ ] composer test:coverage   Coverage report                     â”‚     â”‚
â”‚   â”‚   [ ] composer cs-fix          Code style fixes                    â”‚     â”‚
â”‚   â”‚                                                                     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚   TEST SUITE BREAKDOWN                                                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                       â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚     Suite        â”‚              Description                        â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”‚   Unit           â”‚  Fast, isolated component tests                â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Command parsing                             â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Result objects                              â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Formatters                                  â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ State management                            â”‚     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”‚   Integration    â”‚  Component combination tests                   â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Transport layer tests                       â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Handler + Registry                          â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Parser + Shell                              â”‚     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”‚   Specification  â”‚  TDD consumer behavior specs                   â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Expected behavior definitions               â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Consumer perspective tests                  â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Red-green-refactor validated                â”‚     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â”‚   E2E            â”‚  Full system tests (requires Swoole)          â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Real socket connections                     â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Streaming mode                              â”‚     â”‚
â”‚   â”‚                  â”‚  â€¢ Complete workflows                          â”‚     â”‚
â”‚   â”‚                  â”‚                                                 â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚   TEST DIRECTORY STRUCTURE                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                               â”‚
â”‚   tests/                                                                     â”‚
â”‚   â”œâ”€â”€ Unit/                                                                  â”‚
â”‚   â”‚   â”œâ”€â”€ Command/          # CommandResult, AliasManager                   â”‚
â”‚   â”‚   â”œâ”€â”€ Parser/           # ShellParser, ParsedCommand                    â”‚
â”‚   â”‚   â”œâ”€â”€ Message/          # Message, FilterExpression                     â”‚
â”‚   â”‚   â”œâ”€â”€ Formatter/        # OutputFormatter                               â”‚
â”‚   â”‚   â”œâ”€â”€ State/            # ShellState, HistoryManager                    â”‚
â”‚   â”‚   â””â”€â”€ Server/                                                           â”‚
â”‚   â”‚       â”œâ”€â”€ Handler/      # CommandRegistry, built-ins                    â”‚
â”‚   â”‚       â””â”€â”€ Hyperf/       # HyperfContext, ConfigProvider                 â”‚
â”‚   â”‚                                                                          â”‚
â”‚   â”œâ”€â”€ Integration/                                                           â”‚
â”‚   â”‚   â””â”€â”€ Transport/        # HTTP & Socket transport tests                 â”‚
â”‚   â”‚                                                                          â”‚
â”‚   â”œâ”€â”€ Specification/        # TDD specification tests                       â”‚
â”‚   â”‚                                                                          â”‚
â”‚   â””â”€â”€ Stubs/                                                                 â”‚
â”‚       â””â”€â”€ Hyperf/           # Mock Hyperf classes                           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Command Reference

### Built-in Shell Commands

| Command | Description |
|---------|-------------|
| `help [command]` | Show help for a command |
| `commands` | List all available commands |
| `exit` / `quit` | Exit the shell |
| `clear` | Clear the screen |
| `history` | Show command history |
| `alias name=cmd` | Create command alias |

### Command Options

| Option | Description |
|--------|-------------|
| `--format=table` | Table output (default) |
| `--format=json` | JSON output |
| `--format=csv` | CSV output |
| `\G` | Vertical output (MySQL style) |

---

## Troubleshooting

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ”§ COMMON ISSUES                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   Connection Refused                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚
â”‚   Problem:  Cannot connect to socket                                         â”‚
â”‚   Solution: Ensure Hyperf server is running with ShellProcess enabled       â”‚
â”‚             Check socket_path in config matches client                       â”‚
â”‚                                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                               â”‚
â”‚   Permission Denied                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                          â”‚
â”‚   Problem:  Cannot access Unix socket file                                   â”‚
â”‚   Solution: Check socket_permissions config (default 0660)                   â”‚
â”‚             Ensure user is in correct group                                  â”‚
â”‚             $ chmod 660 /var/run/hyperf-shell.sock                           â”‚
â”‚                                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                               â”‚
â”‚   Command Not Found                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                          â”‚
â”‚   Problem:  Handler not executing                                            â”‚
â”‚   Solution: Verify handler is registered in config 'handlers' array          â”‚
â”‚             Check getCommand() returns correct name                          â”‚
â”‚             Run 'commands' to see registered handlers                        â”‚
â”‚                                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                               â”‚
â”‚   Streaming Not Working                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                      â”‚
â”‚   Problem:  Real-time messages not showing                                   â”‚
â”‚   Solution: Ensure Swoole extension is installed for best performance       â”‚
â”‚             Check transport supports streaming (UnixSocketTransport)         â”‚
â”‚             Verify supportsStreaming() returns true                          â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Additional Resources

- **README.md** - Installation and basic usage
- **CHANGELOG.md** - Version history
- **composer.json** - Dependencies and autoloading
- **phpunit.xml** - Test configuration

### Working Examples

| Example | Description | Requirements |
|---------|-------------|--------------|
| `examples/server.php` | Unix socket server (standard) | None |
| `examples/client.php` | Unix socket client (standard) | None |
| `examples/streaming-server.php` | Real-time streaming server | ext-swoole |
| `examples/streaming-client.php` | StreamingShell client demo | ext-swoole (optional) |
| `examples/http-server.php` | HTTP REST server | None |
| `examples/http-client.php` | HttpTransport client demo | None |

**Quick Start:**
```bash
# Standard Unix socket example
php examples/server.php    # Terminal 1
php examples/client.php    # Terminal 2

# Streaming example (requires Swoole)
php examples/streaming-server.php    # Terminal 1
php examples/streaming-client.php    # Terminal 2

# HTTP example
php examples/http-server.php    # Terminal 1
php examples/http-client.php    # Terminal 2
```

---

*This guide provides visual documentation for the Interactive Shell library. For detailed API documentation, refer to the source code and inline PHPDoc comments.*
